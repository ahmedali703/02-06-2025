/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/plans/route";
exports.ids = ["app/api/plans/route"];
exports.modules = {

/***/ "(rsc)/./app/api/plans/route.ts":
/*!********************************!*\
  !*** ./app/api/plans/route.ts ***!
  \********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./lib/db.ts\");\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_db__WEBPACK_IMPORTED_MODULE_0__]);\n_lib_db__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\nasync function GET() {\n    try {\n        /* ---------- plans ---------- */ const plans = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.query)(`\n      SELECT\n        id               AS \"ID\",\n        plan_name        AS \"PLAN_NAME\",\n        plan_description AS \"PLAN_DESCRIPTION\",\n        price_monthly    AS \"PRICE_MONTHLY\",\n        price_yearly     AS \"PRICE_YEARLY\",\n        is_active        AS \"IS_ACTIVE\",\n        is_free          AS \"IS_FREE\"\n      FROM nl2sql_plans\n      WHERE is_active = 'Y'\n      ORDER BY CASE\n        WHEN UPPER(plan_name) = 'FREE'         THEN 1\n        WHEN UPPER(plan_name) = 'BASIC'        THEN 2\n        WHEN UPPER(plan_name) = 'PROFESSIONAL' THEN 3\n        WHEN UPPER(plan_name) = 'ENTERPRISE'   THEN 4\n        ELSE 5\n      END\n      `, []);\n        /* ---------- features ---------- */ const features = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.query)(`\n      SELECT\n        id          AS \"ID\",\n        feature_key AS \"FEATURE_KEY\",\n        value_num   AS \"VALUE_NUM\",\n        value_text  AS \"VALUE_TEXT\",\n        value_flag  AS \"VALUE_FLAG\",\n        is_active   AS \"IS_ACTIVE\",\n        plan_id     AS \"PLAN_ID\"\n      FROM nl2sql_plans_features\n      WHERE is_active = 'Y'\n      `, []);\n        /* ---------- group & attach ---------- */ const byPlan = {};\n        features.forEach((f)=>{\n            if (!byPlan[f.PLAN_ID]) byPlan[f.PLAN_ID] = [];\n            byPlan[f.PLAN_ID].push(f);\n        });\n        const result = plans.map((p)=>({\n                ...p,\n                features: byPlan[p.ID] ?? []\n            }));\n        return next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.json(result);\n    } catch (err) {\n        console.error('Error fetching pricing plans:', err);\n        return next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.json({\n            error: 'Failed to fetch pricing plans'\n        }, {\n            status: 500\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL3BsYW5zL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFpQztBQUNVO0FBRXBDLGVBQWVFO0lBQ3BCLElBQUk7UUFDRiwrQkFBK0IsR0FDL0IsTUFBTUMsUUFBUSxNQUFNSCw4Q0FBS0EsQ0FDdkIsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7O01Ba0JELENBQUMsRUFDRCxFQUFFO1FBR0osa0NBQWtDLEdBQ2xDLE1BQU1JLFdBQVcsTUFBTUosOENBQUtBLENBQzFCLENBQUM7Ozs7Ozs7Ozs7O01BV0QsQ0FBQyxFQUNELEVBQUU7UUFHSix3Q0FBd0MsR0FDeEMsTUFBTUssU0FBZ0MsQ0FBQztRQUN2Q0QsU0FBU0UsT0FBTyxDQUFDQyxDQUFBQTtZQUNmLElBQUksQ0FBQ0YsTUFBTSxDQUFDRSxFQUFFQyxPQUFPLENBQUMsRUFBRUgsTUFBTSxDQUFDRSxFQUFFQyxPQUFPLENBQUMsR0FBRyxFQUFFO1lBQzlDSCxNQUFNLENBQUNFLEVBQUVDLE9BQU8sQ0FBQyxDQUFDQyxJQUFJLENBQUNGO1FBQ3pCO1FBRUEsTUFBTUcsU0FBU1AsTUFBTVEsR0FBRyxDQUFDQyxDQUFBQSxJQUFNO2dCQUM3QixHQUFHQSxDQUFDO2dCQUNKUixVQUFVQyxNQUFNLENBQUNPLEVBQUVDLEVBQUUsQ0FBQyxJQUFJLEVBQUU7WUFDOUI7UUFFQSxPQUFPWixxREFBWUEsQ0FBQ2EsSUFBSSxDQUFDSjtJQUMzQixFQUFFLE9BQU9LLEtBQUs7UUFDWkMsUUFBUUMsS0FBSyxDQUFDLGlDQUFpQ0Y7UUFDL0MsT0FBT2QscURBQVlBLENBQUNhLElBQUksQ0FDdEI7WUFBRUcsT0FBTztRQUFnQyxHQUN6QztZQUFFQyxRQUFRO1FBQUk7SUFFbEI7QUFDRiIsInNvdXJjZXMiOlsiL2hvbWUvcHJvamVjdC9hcHAvYXBpL3BsYW5zL3JvdXRlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHF1ZXJ5IH0gZnJvbSAnQC9saWIvZGInO1xuaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKCkge1xuICB0cnkge1xuICAgIC8qIC0tLS0tLS0tLS0gcGxhbnMgLS0tLS0tLS0tLSAqL1xuICAgIGNvbnN0IHBsYW5zID0gYXdhaXQgcXVlcnkoXG4gICAgICBgXG4gICAgICBTRUxFQ1RcbiAgICAgICAgaWQgICAgICAgICAgICAgICBBUyBcIklEXCIsXG4gICAgICAgIHBsYW5fbmFtZSAgICAgICAgQVMgXCJQTEFOX05BTUVcIixcbiAgICAgICAgcGxhbl9kZXNjcmlwdGlvbiBBUyBcIlBMQU5fREVTQ1JJUFRJT05cIixcbiAgICAgICAgcHJpY2VfbW9udGhseSAgICBBUyBcIlBSSUNFX01PTlRITFlcIixcbiAgICAgICAgcHJpY2VfeWVhcmx5ICAgICBBUyBcIlBSSUNFX1lFQVJMWVwiLFxuICAgICAgICBpc19hY3RpdmUgICAgICAgIEFTIFwiSVNfQUNUSVZFXCIsXG4gICAgICAgIGlzX2ZyZWUgICAgICAgICAgQVMgXCJJU19GUkVFXCJcbiAgICAgIEZST00gbmwyc3FsX3BsYW5zXG4gICAgICBXSEVSRSBpc19hY3RpdmUgPSAnWSdcbiAgICAgIE9SREVSIEJZIENBU0VcbiAgICAgICAgV0hFTiBVUFBFUihwbGFuX25hbWUpID0gJ0ZSRUUnICAgICAgICAgVEhFTiAxXG4gICAgICAgIFdIRU4gVVBQRVIocGxhbl9uYW1lKSA9ICdCQVNJQycgICAgICAgIFRIRU4gMlxuICAgICAgICBXSEVOIFVQUEVSKHBsYW5fbmFtZSkgPSAnUFJPRkVTU0lPTkFMJyBUSEVOIDNcbiAgICAgICAgV0hFTiBVUFBFUihwbGFuX25hbWUpID0gJ0VOVEVSUFJJU0UnICAgVEhFTiA0XG4gICAgICAgIEVMU0UgNVxuICAgICAgRU5EXG4gICAgICBgLFxuICAgICAgW10sXG4gICAgKTtcblxuICAgIC8qIC0tLS0tLS0tLS0gZmVhdHVyZXMgLS0tLS0tLS0tLSAqL1xuICAgIGNvbnN0IGZlYXR1cmVzID0gYXdhaXQgcXVlcnkoXG4gICAgICBgXG4gICAgICBTRUxFQ1RcbiAgICAgICAgaWQgICAgICAgICAgQVMgXCJJRFwiLFxuICAgICAgICBmZWF0dXJlX2tleSBBUyBcIkZFQVRVUkVfS0VZXCIsXG4gICAgICAgIHZhbHVlX251bSAgIEFTIFwiVkFMVUVfTlVNXCIsXG4gICAgICAgIHZhbHVlX3RleHQgIEFTIFwiVkFMVUVfVEVYVFwiLFxuICAgICAgICB2YWx1ZV9mbGFnICBBUyBcIlZBTFVFX0ZMQUdcIixcbiAgICAgICAgaXNfYWN0aXZlICAgQVMgXCJJU19BQ1RJVkVcIixcbiAgICAgICAgcGxhbl9pZCAgICAgQVMgXCJQTEFOX0lEXCJcbiAgICAgIEZST00gbmwyc3FsX3BsYW5zX2ZlYXR1cmVzXG4gICAgICBXSEVSRSBpc19hY3RpdmUgPSAnWSdcbiAgICAgIGAsXG4gICAgICBbXSxcbiAgICApO1xuXG4gICAgLyogLS0tLS0tLS0tLSBncm91cCAmIGF0dGFjaCAtLS0tLS0tLS0tICovXG4gICAgY29uc3QgYnlQbGFuOiBSZWNvcmQ8bnVtYmVyLCBhbnlbXT4gPSB7fTtcbiAgICBmZWF0dXJlcy5mb3JFYWNoKGYgPT4ge1xuICAgICAgaWYgKCFieVBsYW5bZi5QTEFOX0lEXSkgYnlQbGFuW2YuUExBTl9JRF0gPSBbXTtcbiAgICAgIGJ5UGxhbltmLlBMQU5fSURdLnB1c2goZik7XG4gICAgfSk7XG5cbiAgICBjb25zdCByZXN1bHQgPSBwbGFucy5tYXAocCA9PiAoe1xuICAgICAgLi4ucCxcbiAgICAgIGZlYXR1cmVzOiBieVBsYW5bcC5JRF0gPz8gW10sXG4gICAgfSkpO1xuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHJlc3VsdCk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHByaWNpbmcgcGxhbnM6JywgZXJyKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IGVycm9yOiAnRmFpbGVkIHRvIGZldGNoIHByaWNpbmcgcGxhbnMnIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH0sXG4gICAgKTtcbiAgfVxufSJdLCJuYW1lcyI6WyJxdWVyeSIsIk5leHRSZXNwb25zZSIsIkdFVCIsInBsYW5zIiwiZmVhdHVyZXMiLCJieVBsYW4iLCJmb3JFYWNoIiwiZiIsIlBMQU5fSUQiLCJwdXNoIiwicmVzdWx0IiwibWFwIiwicCIsIklEIiwianNvbiIsImVyciIsImNvbnNvbGUiLCJlcnJvciIsInN0YXR1cyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/plans/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/db.ts":
/*!*******************!*\
  !*** ./lib/db.ts ***!
  \*******************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   exec: () => (/* binding */ exec),\n/* harmony export */   execWithOrgConnection: () => (/* binding */ execWithOrgConnection),\n/* harmony export */   getOrgConnectionDetails: () => (/* binding */ getOrgConnectionDetails),\n/* harmony export */   query: () => (/* binding */ query),\n/* harmony export */   queryWithOrgConnection: () => (/* binding */ queryWithOrgConnection)\n/* harmony export */ });\n/* harmony import */ var pg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! pg */ \"pg\");\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! dotenv/config */ \"(rsc)/./node_modules/dotenv/config.js\");\n/* harmony import */ var dotenv_config__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(dotenv_config__WEBPACK_IMPORTED_MODULE_1__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([pg__WEBPACK_IMPORTED_MODULE_0__]);\npg__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n//lib/db.ts\n\n\n// Connection pool for the default database\nlet pool = null;\n// Track organization-specific pools\nconst orgPools = new Map();\n/**\n * Initialize the database connection pool\n */ async function initPool() {\n    if (!pool) {\n        console.log(process.env.DATABASE_URL);\n        pool = new pg__WEBPACK_IMPORTED_MODULE_0__.Pool({\n            connectionString: process.env.DATABASE_URL,\n            ssl: {\n                rejectUnauthorized: false\n            },\n            max: 10,\n            min: 2,\n            idleTimeoutMillis: 30000,\n            connectionTimeoutMillis: 10000\n        });\n        // Handle pool errors\n        pool.on('error', (err)=>{\n            console.error('Unexpected error on idle client', err);\n        });\n    }\n}\n/**\n * Execute a SELECT query against the database\n * @param sql SQL query to execute\n * @param params Query parameters\n * @returns Array of result rows\n */ async function query(sql, params = []) {\n    if (!pool) {\n        await initPool();\n    }\n    const client = await pool.connect();\n    try {\n        const result = await client.query(sql, params);\n        return result.rows;\n    } catch (err) {\n        console.error('Database error:', err);\n        throw err;\n    } finally{\n        client.release();\n    }\n}\n/**\n * Execute a DML query (INSERT, UPDATE, DELETE) against the database\n * @param sql SQL query to execute\n * @param params Query parameters\n * @returns Object with rowCount property indicating affected rows\n */ async function exec(sql, params = []) {\n    if (!pool) {\n        await initPool();\n    }\n    const client = await pool.connect();\n    try {\n        const result = await client.query(sql, params);\n        return {\n            rowCount: result.rowCount || 0\n        };\n    } catch (error) {\n        console.error(\"❌ Database exec error:\", error);\n        throw error;\n    } finally{\n        client.release();\n    }\n}\n/**\n * Create a database connection for an organization\n * @param orgId Organization ID\n * @param connectionInfo Connection details\n * @returns Pool object for the organization's database\n */ function createOrgPool(orgId, connectionInfo) {\n    // Check if pool exists\n    let orgPool = orgPools.get(orgId);\n    if (orgPool) {\n        return orgPool;\n    }\n    // Create new pool with better limits\n    orgPool = new pg__WEBPACK_IMPORTED_MODULE_0__.Pool({\n        user: connectionInfo.user,\n        password: connectionInfo.password,\n        host: connectionInfo.host,\n        port: connectionInfo.port || 5432,\n        database: connectionInfo.database,\n        ssl: {\n            rejectUnauthorized: false\n        },\n        max: 5,\n        min: 0,\n        idleTimeoutMillis: 30000,\n        connectionTimeoutMillis: 10000\n    });\n    // Handle pool errors\n    orgPool.on('error', (err)=>{\n        console.error(`Unexpected error on idle client for org ${orgId}:`, err);\n        orgPools.delete(orgId); // Remove failed pool\n    });\n    // Store the pool\n    orgPools.set(orgId, orgPool);\n    return orgPool;\n}\n/**\n * Execute a SELECT query against an organization's database\n * @param orgId Organization ID\n * @param connectionInfo Connection details\n * @param sql SQL query to execute\n * @param params Query parameters\n * @returns Array of result rows\n */ async function queryWithOrgConnection(orgId, connectionInfo, sql, params = []) {\n    // Detect database type from connection info\n    const isOracle = connectionInfo && connectionInfo.connectString;\n    const isPostgres = connectionInfo && connectionInfo.host && (connectionInfo.port === '5432' || connectionInfo.port === 5432);\n    const isMySql = connectionInfo && connectionInfo.host && (connectionInfo.port === '3306' || connectionInfo.port === 3306);\n    const isMsSql = connectionInfo && connectionInfo.server;\n    // Log connection attempt\n    console.log(`Connecting to ${isOracle ? 'Oracle' : isPostgres ? 'PostgreSQL' : isMySql ? 'MySQL' : isMsSql ? 'MS SQL' : 'unknown'} database for org ${orgId}`);\n    // Handle Oracle connections\n    if (isOracle) {\n        return queryWithOracleConnection(orgId, connectionInfo, sql, params);\n    }\n    // Validate PostgreSQL connection info\n    if (!isOracle && (!connectionInfo || !connectionInfo.host)) {\n        console.error(`Invalid connection info for org ${orgId}:`, connectionInfo);\n        throw new Error(`Invalid database connection configuration for organization ${orgId}`);\n    }\n    console.log(`Connecting to database for org ${orgId} at ${connectionInfo.host}:${connectionInfo.port || 5432}`);\n    let client;\n    try {\n        const orgPool = createOrgPool(orgId, connectionInfo);\n        client = await orgPool.connect();\n        const result = await client.query(sql, params);\n        return result.rows;\n    } catch (err) {\n        console.error(`Database error for org ${orgId}:`, err.message);\n        // If we get a connection error, cleanup the pool\n        if (err.message.includes('too many clients')) {\n            await cleanupOrgPools();\n        }\n        throw err;\n    } finally{\n        if (client) {\n            client.release();\n        }\n    }\n}\n/**\n * Execute a SELECT query against an Oracle database\n * @param orgId Organization ID\n * @param connectionInfo Oracle connection details\n * @param sql SQL query to execute\n * @param params Query parameters\n * @returns Array of result rows\n */ async function queryWithOracleConnection(orgId, connectionInfo, sql, params = []) {\n    // Validate Oracle connection info\n    if (!connectionInfo || !connectionInfo.user || !connectionInfo.password || !connectionInfo.connectString) {\n        console.error(`Invalid Oracle connection info for org ${orgId}:`, connectionInfo);\n        throw new Error(`Invalid Oracle connection configuration for organization ${orgId}`);\n    }\n    const { user, password, connectString } = connectionInfo;\n    try {\n        // Format the connectString correctly if it doesn't have the proper format\n        let formattedConnectString = connectString;\n        if (!connectString.includes('/') && connectString.includes(':')) {\n            // Convert from host:port/service format to proper Oracle connection string\n            const [hostPort, service] = connectString.split('/');\n            const [host, port] = hostPort.split(':');\n            formattedConnectString = `(DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=${host})(PORT=${port}))(CONNECT_DATA=(SERVICE_NAME=${service})))`;\n            console.log(`Reformatted Oracle connect string to: ${formattedConnectString}`);\n        }\n        // Dynamically import oracledb only when needed\n        const oracledb = await Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! oracledb */ \"oracledb\", 23));\n        // Configure Oracle driver\n        oracledb.default.outFormat = oracledb.default.OUT_FORMAT_OBJECT;\n        // Create connection to Oracle database\n        console.log(`Connecting to Oracle database for org ${orgId} with user ${user}`);\n        const connection = await oracledb.default.getConnection({\n            user,\n            password,\n            connectionString: formattedConnectString\n        });\n        try {\n            // Adapt SQL for Oracle\n            let modifiedSql = adaptSqlForOracle(sql, user);\n            let modifiedParams = params;\n            console.log(`Modified Oracle SQL: ${modifiedSql}`);\n            // Execute the query\n            const result = await connection.execute(modifiedSql, modifiedParams);\n            // Return the rows\n            return result.rows;\n        } catch (err) {\n            console.error(`Oracle query error for org ${orgId}:`, err.message);\n            throw err;\n        } finally{\n            // Close the connection\n            await connection.close();\n        }\n    } catch (err) {\n        console.error(`Oracle connection error for org ${orgId}:`, err.message);\n        // Provide more helpful error message\n        if (err.message.includes('TNS')) {\n            throw new Error(`Cannot connect to Oracle database with connect string '${connectString}'. Please check that the database server is running and the connect string is correct.`);\n        } else if (err.message.includes('ORA-01017')) {\n            throw new Error(`Oracle authentication failed. Please check your username and password.`);\n        } else if (err.message.includes('ORA-00942')) {\n            throw new Error(`Table or view does not exist. Please check that the table exists and is accessible by the ${user} user.`);\n        } else if (err.message.includes('ORA-00905')) {\n            throw new Error(`SQL syntax error: missing keyword. The query syntax may not be compatible with Oracle.`);\n        }\n        throw err;\n    }\n}\n/**\n * Execute a DML query against an organization's database\n * @param orgId Organization ID\n * @param connectionInfo Connection details\n * @param sql SQL query to execute\n * @param params Query parameters\n * @returns Object with rowCount property indicating affected rows\n */ async function execWithOrgConnection(orgId, connectionInfo, sql, params = []) {\n    // Detect database type from connection info\n    const isOracle = connectionInfo && connectionInfo.connectString;\n    // Handle Oracle connections\n    if (isOracle) {\n        return execWithOracleConnection(orgId, connectionInfo, sql, params);\n    }\n    // Handle PostgreSQL and other database types\n    const orgPool = createOrgPool(orgId, connectionInfo);\n    const client = await orgPool.connect();\n    try {\n        const result = await client.query(sql, params);\n        return {\n            rowCount: result.rowCount || 0\n        };\n    } catch (err) {\n        console.error(`Database error for org ${orgId}:`, err);\n        throw err;\n    } finally{\n        client.release();\n        await orgPool.end();\n    }\n}\n/**\n * Execute a DML query against an Oracle database\n * @param orgId Organization ID\n * @param connectionInfo Oracle connection details\n * @param sql SQL query to execute\n * @param params Query parameters\n * @returns Object with rowCount property indicating affected rows\n */ async function execWithOracleConnection(orgId, connectionInfo, sql, params = []) {\n    // Validate Oracle connection info\n    if (!connectionInfo || !connectionInfo.user || !connectionInfo.password || !connectionInfo.connectString) {\n        console.error(`Invalid Oracle connection info for org ${orgId}:`, connectionInfo);\n        throw new Error(`Invalid Oracle connection configuration for organization ${orgId}`);\n    }\n    const { user, password, connectString } = connectionInfo;\n    try {\n        // Format the connectString correctly if it doesn't have the proper format\n        let formattedConnectString = connectString;\n        if (!connectString.includes('/') && connectString.includes(':')) {\n            // Convert from host:port/service format to proper Oracle connection string\n            const [hostPort, service] = connectString.split('/');\n            const [host, port] = hostPort.split(':');\n            formattedConnectString = `(DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=${host})(PORT=${port}))(CONNECT_DATA=(SERVICE_NAME=${service})))`;\n            console.log(`Reformatted Oracle connect string to: ${formattedConnectString}`);\n        }\n        // Dynamically import oracledb only when needed\n        const oracledb = await Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! oracledb */ \"oracledb\", 23));\n        // Configure Oracle driver\n        oracledb.default.outFormat = oracledb.default.OUT_FORMAT_OBJECT;\n        // Create connection to Oracle database\n        console.log(`Connecting to Oracle database for org ${orgId} with user ${user}`);\n        const connection = await oracledb.default.getConnection({\n            user,\n            password,\n            connectionString: formattedConnectString\n        });\n        try {\n            // Execute the query\n            const result = await connection.execute(sql, params, {\n                autoCommit: true\n            });\n            // Return the rowCount (Oracle calls this rowsAffected)\n            return {\n                rowCount: result.rowsAffected || 0\n            };\n        } catch (err) {\n            console.error(`Oracle query error for org ${orgId}:`, err.message);\n            throw err;\n        } finally{\n            // Close the connection\n            await connection.close();\n        }\n    } catch (err) {\n        console.error(`Oracle connection error for org ${orgId}:`, err.message);\n        throw err;\n    }\n}\n/**\n * Get connection details for an organization\n * @param orgId Organization ID\n * @returns Connection details or null if not found\n */ async function getOrgConnectionDetails(orgId) {\n    try {\n        const result = await query(`SELECT \"DATABASE_INFO\" FROM \"NL2SQL_ORG\" WHERE \"ORG_ID\" = $1`, [\n            orgId\n        ]);\n        if (result && result.length > 0 && result[0].DATABASE_INFO) {\n            return JSON.parse(result[0].DATABASE_INFO);\n        }\n        return null;\n    } catch (error) {\n        console.error(\"Error getting organization connection details:\", error);\n        return null;\n    }\n}\n/**\n * Adapt SQL query for Oracle database\n * @param sql SQL query to adapt\n * @param schemaName Schema name to prefix tables with\n * @returns Adapted SQL query\n */ function adaptSqlForOracle(sql, user) {\n    // Si no hay SQL, devolver cadena vacía\n    if (!sql) return '';\n    // Convertir SQL a mayúsculas para facilitar la coincidencia de patrones\n    let upperSql = sql.toUpperCase();\n    let modifiedSql = sql;\n    // Verificar si es una consulta de estilo PostgreSQL\n    const isPgStyle = upperSql.includes('\"') || upperSql.includes('$1') || upperSql.includes('LIMIT');\n    // Verificar si la consulta es para tablas del sistema\n    const isSystemTableQuery = upperSql.includes('ALL_TABLES') || upperSql.includes('USER_TABLES') || upperSql.includes('DUAL');\n    if (isPgStyle) {\n        console.log('Converting PostgreSQL-style query to Oracle syntax');\n        // Reemplazar comillas dobles con nada (Oracle no necesita comillas para identificadores regulares)\n        if (!isSystemTableQuery) {\n            modifiedSql = modifiedSql.replace(/\"/g, '');\n        }\n        // Reemplazar $1, $2, etc. con :1, :2, etc.\n        modifiedSql = modifiedSql.replace(/\\$([0-9]+)/g, ':$1');\n        // Reemplazar LIMIT con FETCH FIRST/NEXT\n        if (upperSql.includes('LIMIT')) {\n            const limitMatch = modifiedSql.match(/LIMIT\\s+(\\d+)/i);\n            if (limitMatch) {\n                const limitValue = limitMatch[1];\n                modifiedSql = modifiedSql.replace(/LIMIT\\s+\\d+/i, `FETCH FIRST ${limitValue} ROWS ONLY`);\n            }\n        }\n    }\n    // Si es una consulta para tablas del sistema, NO agregar prefijo de esquema\n    if (isSystemTableQuery && user && user.username) {\n        // Para tablas del sistema, eliminar cualquier prefijo de esquema que se haya agregado\n        const schemaPrefix = new RegExp(`${user.username}\\.`, 'gi');\n        modifiedSql = modifiedSql.replace(schemaPrefix, '');\n        return modifiedSql;\n    }\n    // Agregar prefijo de esquema para tablas de Oracle si aún no tienen uno\n    if (user && user.username) {\n        // Buscar nombres de tablas en cláusulas FROM y JOIN\n        modifiedSql = modifiedSql.replace(/(?:FROM|JOIN)\\s+([\"']?)(\\w+)([\"']?)/gi, (match, quote1, tableName, quote2)=>{\n            // Si el nombre de la tabla ya tiene un prefijo de esquema, dejarlo solo\n            if (tableName.includes('.')) {\n                return match;\n            }\n            // Omitir tablas del sistema\n            if ([\n                'ALL_TABLES',\n                'USER_TABLES',\n                'DUAL'\n            ].includes(tableName.toUpperCase())) {\n                return match;\n            }\n            // De lo contrario, agregar el prefijo de esquema con el nombre de usuario actual\n            return match.replace(`${quote1}${tableName}${quote2}`, `${quote1}${user.username}.${tableName}${quote2}`);\n        });\n    }\n    return modifiedSql;\n}\n// Add a cleanup function for org pools\nasync function cleanupOrgPools() {\n    const orgIds = Array.from(orgPools.keys());\n    for (const orgId of orgIds){\n        const pool = orgPools.get(orgId);\n        if (pool) {\n            try {\n                await pool.end();\n                orgPools.delete(orgId);\n            } catch (err) {\n                console.error(`Error cleaning up pool for org ${orgId}:`, err);\n            }\n        }\n    }\n}\n// Add process cleanup handlers\nprocess.on('SIGTERM', cleanupOrgPools);\nprocess.on('SIGINT', cleanupOrgPools);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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dHNcbmltcG9ydCB7IFBvb2wsIFF1ZXJ5UmVzdWx0IH0gZnJvbSAncGcnO1xuaW1wb3J0ICdkb3RlbnYvY29uZmlnJztcbmltcG9ydCB7IFJlc3VsdCB9IGZyb20gJ0AvbGliL3R5cGVzJztcblxuLy8gQ29ubmVjdGlvbiBwb29sIGZvciB0aGUgZGVmYXVsdCBkYXRhYmFzZVxubGV0IHBvb2w6IFBvb2wgfCBudWxsID0gbnVsbDtcblxuLy8gVHJhY2sgb3JnYW5pemF0aW9uLXNwZWNpZmljIHBvb2xzXG5jb25zdCBvcmdQb29scyA9IG5ldyBNYXA8bnVtYmVyLCBQb29sPigpO1xuXG4vKipcbiAqIEluaXRpYWxpemUgdGhlIGRhdGFiYXNlIGNvbm5lY3Rpb24gcG9vbFxuICovXG5hc3luYyBmdW5jdGlvbiBpbml0UG9vbCgpIHtcbiAgaWYgKCFwb29sKSB7XG4gICAgY29uc29sZS5sb2cocHJvY2Vzcy5lbnYuREFUQUJBU0VfVVJMKVxuICAgIHBvb2wgPSBuZXcgUG9vbCh7XG4gICAgICBjb25uZWN0aW9uU3RyaW5nOiBwcm9jZXNzLmVudi5EQVRBQkFTRV9VUkwsXG4gICAgICBzc2w6IHtcbiAgICAgICAgcmVqZWN0VW5hdXRob3JpemVkOiBmYWxzZSxcbiAgICAgIH0sXG4gICAgICBtYXg6IDEwLFxuICAgICAgbWluOiAyLFxuICAgICAgaWRsZVRpbWVvdXRNaWxsaXM6IDMwMDAwLFxuICAgICAgY29ubmVjdGlvblRpbWVvdXRNaWxsaXM6IDEwMDAwLFxuICAgIH0pO1xuXG4gICAgLy8gSGFuZGxlIHBvb2wgZXJyb3JzXG4gICAgcG9vbC5vbignZXJyb3InLCAoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKCdVbmV4cGVjdGVkIGVycm9yIG9uIGlkbGUgY2xpZW50JywgZXJyKTtcbiAgICB9KTtcbiAgfVxufVxuXG4vKipcbiAqIEV4ZWN1dGUgYSBTRUxFQ1QgcXVlcnkgYWdhaW5zdCB0aGUgZGF0YWJhc2VcbiAqIEBwYXJhbSBzcWwgU1FMIHF1ZXJ5IHRvIGV4ZWN1dGVcbiAqIEBwYXJhbSBwYXJhbXMgUXVlcnkgcGFyYW1ldGVyc1xuICogQHJldHVybnMgQXJyYXkgb2YgcmVzdWx0IHJvd3NcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHF1ZXJ5PFQgPSBhbnk+KHNxbDogc3RyaW5nLCBwYXJhbXM6IGFueVtdID0gW10pOiBQcm9taXNlPFRbXT4ge1xuICBpZiAoIXBvb2wpIHtcbiAgICBhd2FpdCBpbml0UG9vbCgpO1xuICB9XG5cbiAgY29uc3QgY2xpZW50ID0gYXdhaXQgcG9vbCEuY29ubmVjdCgpO1xuICB0cnkge1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNsaWVudC5xdWVyeShzcWwsIHBhcmFtcyk7XG4gICAgcmV0dXJuIHJlc3VsdC5yb3dzIGFzIFRbXTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgY29uc29sZS5lcnJvcignRGF0YWJhc2UgZXJyb3I6JywgZXJyKTtcbiAgICB0aHJvdyBlcnI7XG4gIH0gZmluYWxseSB7XG4gICAgY2xpZW50LnJlbGVhc2UoKTtcbiAgfVxufVxuXG4vKipcbiAqIEV4ZWN1dGUgYSBETUwgcXVlcnkgKElOU0VSVCwgVVBEQVRFLCBERUxFVEUpIGFnYWluc3QgdGhlIGRhdGFiYXNlXG4gKiBAcGFyYW0gc3FsIFNRTCBxdWVyeSB0byBleGVjdXRlXG4gKiBAcGFyYW0gcGFyYW1zIFF1ZXJ5IHBhcmFtZXRlcnNcbiAqIEByZXR1cm5zIE9iamVjdCB3aXRoIHJvd0NvdW50IHByb3BlcnR5IGluZGljYXRpbmcgYWZmZWN0ZWQgcm93c1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZXhlYyhzcWw6IHN0cmluZywgcGFyYW1zOiBhbnlbXSA9IFtdKTogUHJvbWlzZTx7cm93Q291bnQ6IG51bWJlcn0+IHtcbiAgaWYgKCFwb29sKSB7XG4gICAgYXdhaXQgaW5pdFBvb2woKTtcbiAgfVxuXG4gIGNvbnN0IGNsaWVudCA9IGF3YWl0IHBvb2whLmNvbm5lY3QoKTtcbiAgdHJ5IHtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjbGllbnQucXVlcnkoc3FsLCBwYXJhbXMpO1xuICAgIHJldHVybiB7IHJvd0NvdW50OiByZXN1bHQucm93Q291bnQgfHwgMCB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgRGF0YWJhc2UgZXhlYyBlcnJvcjpcIiwgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9IGZpbmFsbHkge1xuICAgIGNsaWVudC5yZWxlYXNlKCk7XG4gIH1cbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBkYXRhYmFzZSBjb25uZWN0aW9uIGZvciBhbiBvcmdhbml6YXRpb25cbiAqIEBwYXJhbSBvcmdJZCBPcmdhbml6YXRpb24gSURcbiAqIEBwYXJhbSBjb25uZWN0aW9uSW5mbyBDb25uZWN0aW9uIGRldGFpbHNcbiAqIEByZXR1cm5zIFBvb2wgb2JqZWN0IGZvciB0aGUgb3JnYW5pemF0aW9uJ3MgZGF0YWJhc2VcbiAqL1xuZnVuY3Rpb24gY3JlYXRlT3JnUG9vbChvcmdJZDogbnVtYmVyLCBjb25uZWN0aW9uSW5mbzoge1xuICB1c2VyOiBzdHJpbmc7XG4gIHBhc3N3b3JkOiBzdHJpbmc7XG4gIGhvc3Q6IHN0cmluZztcbiAgcG9ydD86IG51bWJlcjtcbiAgZGF0YWJhc2U6IHN0cmluZztcbn0pOiBQb29sIHtcbiAgLy8gQ2hlY2sgaWYgcG9vbCBleGlzdHNcbiAgbGV0IG9yZ1Bvb2wgPSBvcmdQb29scy5nZXQob3JnSWQpO1xuICBcbiAgaWYgKG9yZ1Bvb2wpIHtcbiAgICByZXR1cm4gb3JnUG9vbDtcbiAgfVxuXG4gIC8vIENyZWF0ZSBuZXcgcG9vbCB3aXRoIGJldHRlciBsaW1pdHNcbiAgb3JnUG9vbCA9IG5ldyBQb29sKHtcbiAgICB1c2VyOiBjb25uZWN0aW9uSW5mby51c2VyLFxuICAgIHBhc3N3b3JkOiBjb25uZWN0aW9uSW5mby5wYXNzd29yZCxcbiAgICBob3N0OiBjb25uZWN0aW9uSW5mby5ob3N0LFxuICAgIHBvcnQ6IGNvbm5lY3Rpb25JbmZvLnBvcnQgfHwgNTQzMixcbiAgICBkYXRhYmFzZTogY29ubmVjdGlvbkluZm8uZGF0YWJhc2UsXG4gICAgc3NsOiB7XG4gICAgICByZWplY3RVbmF1dGhvcml6ZWQ6IGZhbHNlLFxuICAgIH0sXG4gICAgbWF4OiA1LFxuICAgIG1pbjogMCxcbiAgICBpZGxlVGltZW91dE1pbGxpczogMzAwMDAsXG4gICAgY29ubmVjdGlvblRpbWVvdXRNaWxsaXM6IDEwMDAwLFxuICB9KTtcblxuICAvLyBIYW5kbGUgcG9vbCBlcnJvcnNcbiAgb3JnUG9vbC5vbignZXJyb3InLCAoZXJyKSA9PiB7XG4gICAgY29uc29sZS5lcnJvcihgVW5leHBlY3RlZCBlcnJvciBvbiBpZGxlIGNsaWVudCBmb3Igb3JnICR7b3JnSWR9OmAsIGVycik7XG4gICAgb3JnUG9vbHMuZGVsZXRlKG9yZ0lkKTsgIC8vIFJlbW92ZSBmYWlsZWQgcG9vbFxuICB9KTtcblxuICAvLyBTdG9yZSB0aGUgcG9vbFxuICBvcmdQb29scy5zZXQob3JnSWQsIG9yZ1Bvb2wpO1xuICBcbiAgcmV0dXJuIG9yZ1Bvb2w7XG59XG5cbi8qKlxuICogRXhlY3V0ZSBhIFNFTEVDVCBxdWVyeSBhZ2FpbnN0IGFuIG9yZ2FuaXphdGlvbidzIGRhdGFiYXNlXG4gKiBAcGFyYW0gb3JnSWQgT3JnYW5pemF0aW9uIElEXG4gKiBAcGFyYW0gY29ubmVjdGlvbkluZm8gQ29ubmVjdGlvbiBkZXRhaWxzXG4gKiBAcGFyYW0gc3FsIFNRTCBxdWVyeSB0byBleGVjdXRlXG4gKiBAcGFyYW0gcGFyYW1zIFF1ZXJ5IHBhcmFtZXRlcnNcbiAqIEByZXR1cm5zIEFycmF5IG9mIHJlc3VsdCByb3dzXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBxdWVyeVdpdGhPcmdDb25uZWN0aW9uPFQgPSBhbnk+KFxuICBvcmdJZDogbnVtYmVyLCBcbiAgY29ubmVjdGlvbkluZm86IGFueSwgXG4gIHNxbDogc3RyaW5nLCBcbiAgcGFyYW1zOiBhbnlbXSA9IFtdXG4pOiBQcm9taXNlPFRbXT4ge1xuICAvLyBEZXRlY3QgZGF0YWJhc2UgdHlwZSBmcm9tIGNvbm5lY3Rpb24gaW5mb1xuICBjb25zdCBpc09yYWNsZSA9IGNvbm5lY3Rpb25JbmZvICYmIGNvbm5lY3Rpb25JbmZvLmNvbm5lY3RTdHJpbmc7XG4gIGNvbnN0IGlzUG9zdGdyZXMgPSBjb25uZWN0aW9uSW5mbyAmJiBjb25uZWN0aW9uSW5mby5ob3N0ICYmIChjb25uZWN0aW9uSW5mby5wb3J0ID09PSAnNTQzMicgfHwgY29ubmVjdGlvbkluZm8ucG9ydCA9PT0gNTQzMik7XG4gIGNvbnN0IGlzTXlTcWwgPSBjb25uZWN0aW9uSW5mbyAmJiBjb25uZWN0aW9uSW5mby5ob3N0ICYmIChjb25uZWN0aW9uSW5mby5wb3J0ID09PSAnMzMwNicgfHwgY29ubmVjdGlvbkluZm8ucG9ydCA9PT0gMzMwNik7XG4gIGNvbnN0IGlzTXNTcWwgPSBjb25uZWN0aW9uSW5mbyAmJiBjb25uZWN0aW9uSW5mby5zZXJ2ZXI7XG4gIFxuICAvLyBMb2cgY29ubmVjdGlvbiBhdHRlbXB0XG4gIGNvbnNvbGUubG9nKGBDb25uZWN0aW5nIHRvICR7aXNPcmFjbGUgPyAnT3JhY2xlJyA6IGlzUG9zdGdyZXMgPyAnUG9zdGdyZVNRTCcgOiBpc015U3FsID8gJ015U1FMJyA6IGlzTXNTcWwgPyAnTVMgU1FMJyA6ICd1bmtub3duJ30gZGF0YWJhc2UgZm9yIG9yZyAke29yZ0lkfWApO1xuICBcbiAgLy8gSGFuZGxlIE9yYWNsZSBjb25uZWN0aW9uc1xuICBpZiAoaXNPcmFjbGUpIHtcbiAgICByZXR1cm4gcXVlcnlXaXRoT3JhY2xlQ29ubmVjdGlvbihvcmdJZCwgY29ubmVjdGlvbkluZm8sIHNxbCwgcGFyYW1zKTtcbiAgfVxuICBcbiAgLy8gVmFsaWRhdGUgUG9zdGdyZVNRTCBjb25uZWN0aW9uIGluZm9cbiAgaWYgKCFpc09yYWNsZSAmJiAoIWNvbm5lY3Rpb25JbmZvIHx8ICFjb25uZWN0aW9uSW5mby5ob3N0KSkge1xuICAgIGNvbnNvbGUuZXJyb3IoYEludmFsaWQgY29ubmVjdGlvbiBpbmZvIGZvciBvcmcgJHtvcmdJZH06YCwgY29ubmVjdGlvbkluZm8pO1xuICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBkYXRhYmFzZSBjb25uZWN0aW9uIGNvbmZpZ3VyYXRpb24gZm9yIG9yZ2FuaXphdGlvbiAke29yZ0lkfWApO1xuICB9XG5cbiAgY29uc29sZS5sb2coYENvbm5lY3RpbmcgdG8gZGF0YWJhc2UgZm9yIG9yZyAke29yZ0lkfSBhdCAke2Nvbm5lY3Rpb25JbmZvLmhvc3R9OiR7Y29ubmVjdGlvbkluZm8ucG9ydCB8fCA1NDMyfWApO1xuICBcbiAgbGV0IGNsaWVudDtcbiAgdHJ5IHtcbiAgICBjb25zdCBvcmdQb29sID0gY3JlYXRlT3JnUG9vbChvcmdJZCwgY29ubmVjdGlvbkluZm8pO1xuICAgIGNsaWVudCA9IGF3YWl0IG9yZ1Bvb2wuY29ubmVjdCgpO1xuICAgIFxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNsaWVudC5xdWVyeShzcWwsIHBhcmFtcyk7XG4gICAgcmV0dXJuIHJlc3VsdC5yb3dzIGFzIFRbXTtcbiAgfSBjYXRjaCAoZXJyOiBhbnkpIHtcbiAgICBjb25zb2xlLmVycm9yKGBEYXRhYmFzZSBlcnJvciBmb3Igb3JnICR7b3JnSWR9OmAsIGVyci5tZXNzYWdlKTtcbiAgICBcbiAgICAvLyBJZiB3ZSBnZXQgYSBjb25uZWN0aW9uIGVycm9yLCBjbGVhbnVwIHRoZSBwb29sXG4gICAgaWYgKGVyci5tZXNzYWdlLmluY2x1ZGVzKCd0b28gbWFueSBjbGllbnRzJykpIHtcbiAgICAgIGF3YWl0IGNsZWFudXBPcmdQb29scygpO1xuICAgIH1cbiAgICBcbiAgICB0aHJvdyBlcnI7XG4gIH0gZmluYWxseSB7XG4gICAgaWYgKGNsaWVudCkge1xuICAgICAgY2xpZW50LnJlbGVhc2UoKTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBFeGVjdXRlIGEgU0VMRUNUIHF1ZXJ5IGFnYWluc3QgYW4gT3JhY2xlIGRhdGFiYXNlXG4gKiBAcGFyYW0gb3JnSWQgT3JnYW5pemF0aW9uIElEXG4gKiBAcGFyYW0gY29ubmVjdGlvbkluZm8gT3JhY2xlIGNvbm5lY3Rpb24gZGV0YWlsc1xuICogQHBhcmFtIHNxbCBTUUwgcXVlcnkgdG8gZXhlY3V0ZVxuICogQHBhcmFtIHBhcmFtcyBRdWVyeSBwYXJhbWV0ZXJzXG4gKiBAcmV0dXJucyBBcnJheSBvZiByZXN1bHQgcm93c1xuICovXG5hc3luYyBmdW5jdGlvbiBxdWVyeVdpdGhPcmFjbGVDb25uZWN0aW9uPFQgPSBhbnk+KFxuICBvcmdJZDogbnVtYmVyLFxuICBjb25uZWN0aW9uSW5mbzogYW55LFxuICBzcWw6IHN0cmluZyxcbiAgcGFyYW1zOiBhbnlbXSA9IFtdXG4pOiBQcm9taXNlPFRbXT4ge1xuICAvLyBWYWxpZGF0ZSBPcmFjbGUgY29ubmVjdGlvbiBpbmZvXG4gIGlmICghY29ubmVjdGlvbkluZm8gfHwgIWNvbm5lY3Rpb25JbmZvLnVzZXIgfHwgIWNvbm5lY3Rpb25JbmZvLnBhc3N3b3JkIHx8ICFjb25uZWN0aW9uSW5mby5jb25uZWN0U3RyaW5nKSB7XG4gICAgY29uc29sZS5lcnJvcihgSW52YWxpZCBPcmFjbGUgY29ubmVjdGlvbiBpbmZvIGZvciBvcmcgJHtvcmdJZH06YCwgY29ubmVjdGlvbkluZm8pO1xuICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBPcmFjbGUgY29ubmVjdGlvbiBjb25maWd1cmF0aW9uIGZvciBvcmdhbml6YXRpb24gJHtvcmdJZH1gKTtcbiAgfVxuICBcbiAgY29uc3QgeyB1c2VyLCBwYXNzd29yZCwgY29ubmVjdFN0cmluZyB9ID0gY29ubmVjdGlvbkluZm87XG4gIFxuICB0cnkge1xuICAgIC8vIEZvcm1hdCB0aGUgY29ubmVjdFN0cmluZyBjb3JyZWN0bHkgaWYgaXQgZG9lc24ndCBoYXZlIHRoZSBwcm9wZXIgZm9ybWF0XG4gICAgbGV0IGZvcm1hdHRlZENvbm5lY3RTdHJpbmcgPSBjb25uZWN0U3RyaW5nO1xuICAgIGlmICghY29ubmVjdFN0cmluZy5pbmNsdWRlcygnLycpICYmIGNvbm5lY3RTdHJpbmcuaW5jbHVkZXMoJzonKSkge1xuICAgICAgLy8gQ29udmVydCBmcm9tIGhvc3Q6cG9ydC9zZXJ2aWNlIGZvcm1hdCB0byBwcm9wZXIgT3JhY2xlIGNvbm5lY3Rpb24gc3RyaW5nXG4gICAgICBjb25zdCBbaG9zdFBvcnQsIHNlcnZpY2VdID0gY29ubmVjdFN0cmluZy5zcGxpdCgnLycpO1xuICAgICAgY29uc3QgW2hvc3QsIHBvcnRdID0gaG9zdFBvcnQuc3BsaXQoJzonKTtcbiAgICAgIGZvcm1hdHRlZENvbm5lY3RTdHJpbmcgPSBgKERFU0NSSVBUSU9OPShBRERSRVNTPShQUk9UT0NPTD1UQ1ApKEhPU1Q9JHtob3N0fSkoUE9SVD0ke3BvcnR9KSkoQ09OTkVDVF9EQVRBPShTRVJWSUNFX05BTUU9JHtzZXJ2aWNlfSkpKWA7XG4gICAgICBjb25zb2xlLmxvZyhgUmVmb3JtYXR0ZWQgT3JhY2xlIGNvbm5lY3Qgc3RyaW5nIHRvOiAke2Zvcm1hdHRlZENvbm5lY3RTdHJpbmd9YCk7XG4gICAgfVxuICAgIFxuICAgIC8vIER5bmFtaWNhbGx5IGltcG9ydCBvcmFjbGVkYiBvbmx5IHdoZW4gbmVlZGVkXG4gICAgY29uc3Qgb3JhY2xlZGIgPSBhd2FpdCBpbXBvcnQoJ29yYWNsZWRiJyk7XG4gICAgXG4gICAgLy8gQ29uZmlndXJlIE9yYWNsZSBkcml2ZXJcbiAgICBvcmFjbGVkYi5kZWZhdWx0Lm91dEZvcm1hdCA9IG9yYWNsZWRiLmRlZmF1bHQuT1VUX0ZPUk1BVF9PQkpFQ1Q7XG4gICAgXG4gICAgLy8gQ3JlYXRlIGNvbm5lY3Rpb24gdG8gT3JhY2xlIGRhdGFiYXNlXG4gICAgY29uc29sZS5sb2coYENvbm5lY3RpbmcgdG8gT3JhY2xlIGRhdGFiYXNlIGZvciBvcmcgJHtvcmdJZH0gd2l0aCB1c2VyICR7dXNlcn1gKTtcbiAgICBjb25zdCBjb25uZWN0aW9uID0gYXdhaXQgb3JhY2xlZGIuZGVmYXVsdC5nZXRDb25uZWN0aW9uKHtcbiAgICAgIHVzZXIsXG4gICAgICBwYXNzd29yZCxcbiAgICAgIGNvbm5lY3Rpb25TdHJpbmc6IGZvcm1hdHRlZENvbm5lY3RTdHJpbmcsXG4gICAgfSk7XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIC8vIEFkYXB0IFNRTCBmb3IgT3JhY2xlXG4gICAgICBsZXQgbW9kaWZpZWRTcWwgPSBhZGFwdFNxbEZvck9yYWNsZShzcWwsIHVzZXIpO1xuICAgICAgbGV0IG1vZGlmaWVkUGFyYW1zID0gcGFyYW1zO1xuICAgICAgXG4gICAgICBjb25zb2xlLmxvZyhgTW9kaWZpZWQgT3JhY2xlIFNRTDogJHttb2RpZmllZFNxbH1gKTtcbiAgICAgIFxuICAgICAgLy8gRXhlY3V0ZSB0aGUgcXVlcnlcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbm5lY3Rpb24uZXhlY3V0ZShtb2RpZmllZFNxbCwgbW9kaWZpZWRQYXJhbXMpO1xuICAgICAgXG4gICAgICAvLyBSZXR1cm4gdGhlIHJvd3NcbiAgICAgIHJldHVybiByZXN1bHQucm93cyBhcyBUW107XG4gICAgfSBjYXRjaCAoZXJyOiBhbnkpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYE9yYWNsZSBxdWVyeSBlcnJvciBmb3Igb3JnICR7b3JnSWR9OmAsIGVyci5tZXNzYWdlKTtcbiAgICAgIHRocm93IGVycjtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgLy8gQ2xvc2UgdGhlIGNvbm5lY3Rpb25cbiAgICAgIGF3YWl0IGNvbm5lY3Rpb24uY2xvc2UoKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycjogYW55KSB7XG4gICAgY29uc29sZS5lcnJvcihgT3JhY2xlIGNvbm5lY3Rpb24gZXJyb3IgZm9yIG9yZyAke29yZ0lkfTpgLCBlcnIubWVzc2FnZSk7XG4gICAgXG4gICAgLy8gUHJvdmlkZSBtb3JlIGhlbHBmdWwgZXJyb3IgbWVzc2FnZVxuICAgIGlmIChlcnIubWVzc2FnZS5pbmNsdWRlcygnVE5TJykpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IGNvbm5lY3QgdG8gT3JhY2xlIGRhdGFiYXNlIHdpdGggY29ubmVjdCBzdHJpbmcgJyR7Y29ubmVjdFN0cmluZ30nLiBQbGVhc2UgY2hlY2sgdGhhdCB0aGUgZGF0YWJhc2Ugc2VydmVyIGlzIHJ1bm5pbmcgYW5kIHRoZSBjb25uZWN0IHN0cmluZyBpcyBjb3JyZWN0LmApO1xuICAgIH0gZWxzZSBpZiAoZXJyLm1lc3NhZ2UuaW5jbHVkZXMoJ09SQS0wMTAxNycpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYE9yYWNsZSBhdXRoZW50aWNhdGlvbiBmYWlsZWQuIFBsZWFzZSBjaGVjayB5b3VyIHVzZXJuYW1lIGFuZCBwYXNzd29yZC5gKTtcbiAgICB9IGVsc2UgaWYgKGVyci5tZXNzYWdlLmluY2x1ZGVzKCdPUkEtMDA5NDInKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBUYWJsZSBvciB2aWV3IGRvZXMgbm90IGV4aXN0LiBQbGVhc2UgY2hlY2sgdGhhdCB0aGUgdGFibGUgZXhpc3RzIGFuZCBpcyBhY2Nlc3NpYmxlIGJ5IHRoZSAke3VzZXJ9IHVzZXIuYCk7XG4gICAgfSBlbHNlIGlmIChlcnIubWVzc2FnZS5pbmNsdWRlcygnT1JBLTAwOTA1JykpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgU1FMIHN5bnRheCBlcnJvcjogbWlzc2luZyBrZXl3b3JkLiBUaGUgcXVlcnkgc3ludGF4IG1heSBub3QgYmUgY29tcGF0aWJsZSB3aXRoIE9yYWNsZS5gKTtcbiAgICB9XG4gICAgXG4gICAgdGhyb3cgZXJyO1xuICB9XG59XG5cbi8qKlxuICogRXhlY3V0ZSBhIERNTCBxdWVyeSBhZ2FpbnN0IGFuIG9yZ2FuaXphdGlvbidzIGRhdGFiYXNlXG4gKiBAcGFyYW0gb3JnSWQgT3JnYW5pemF0aW9uIElEXG4gKiBAcGFyYW0gY29ubmVjdGlvbkluZm8gQ29ubmVjdGlvbiBkZXRhaWxzXG4gKiBAcGFyYW0gc3FsIFNRTCBxdWVyeSB0byBleGVjdXRlXG4gKiBAcGFyYW0gcGFyYW1zIFF1ZXJ5IHBhcmFtZXRlcnNcbiAqIEByZXR1cm5zIE9iamVjdCB3aXRoIHJvd0NvdW50IHByb3BlcnR5IGluZGljYXRpbmcgYWZmZWN0ZWQgcm93c1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZXhlY1dpdGhPcmdDb25uZWN0aW9uKFxuICBvcmdJZDogbnVtYmVyLCBcbiAgY29ubmVjdGlvbkluZm86IGFueSwgXG4gIHNxbDogc3RyaW5nLCBcbiAgcGFyYW1zOiBhbnlbXSA9IFtdXG4pOiBQcm9taXNlPHtyb3dDb3VudDogbnVtYmVyfT4ge1xuICAvLyBEZXRlY3QgZGF0YWJhc2UgdHlwZSBmcm9tIGNvbm5lY3Rpb24gaW5mb1xuICBjb25zdCBpc09yYWNsZSA9IGNvbm5lY3Rpb25JbmZvICYmIGNvbm5lY3Rpb25JbmZvLmNvbm5lY3RTdHJpbmc7XG4gIFxuICAvLyBIYW5kbGUgT3JhY2xlIGNvbm5lY3Rpb25zXG4gIGlmIChpc09yYWNsZSkge1xuICAgIHJldHVybiBleGVjV2l0aE9yYWNsZUNvbm5lY3Rpb24ob3JnSWQsIGNvbm5lY3Rpb25JbmZvLCBzcWwsIHBhcmFtcyk7XG4gIH1cbiAgXG4gIC8vIEhhbmRsZSBQb3N0Z3JlU1FMIGFuZCBvdGhlciBkYXRhYmFzZSB0eXBlc1xuICBjb25zdCBvcmdQb29sID0gY3JlYXRlT3JnUG9vbChvcmdJZCwgY29ubmVjdGlvbkluZm8pO1xuICBcbiAgY29uc3QgY2xpZW50ID0gYXdhaXQgb3JnUG9vbC5jb25uZWN0KCk7XG4gIHRyeSB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY2xpZW50LnF1ZXJ5KHNxbCwgcGFyYW1zKTtcbiAgICByZXR1cm4geyByb3dDb3VudDogcmVzdWx0LnJvd0NvdW50IHx8IDAgfTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgY29uc29sZS5lcnJvcihgRGF0YWJhc2UgZXJyb3IgZm9yIG9yZyAke29yZ0lkfTpgLCBlcnIpO1xuICAgIHRocm93IGVycjtcbiAgfSBmaW5hbGx5IHtcbiAgICBjbGllbnQucmVsZWFzZSgpO1xuICAgIGF3YWl0IG9yZ1Bvb2wuZW5kKCk7XG4gIH1cbn1cblxuLyoqXG4gKiBFeGVjdXRlIGEgRE1MIHF1ZXJ5IGFnYWluc3QgYW4gT3JhY2xlIGRhdGFiYXNlXG4gKiBAcGFyYW0gb3JnSWQgT3JnYW5pemF0aW9uIElEXG4gKiBAcGFyYW0gY29ubmVjdGlvbkluZm8gT3JhY2xlIGNvbm5lY3Rpb24gZGV0YWlsc1xuICogQHBhcmFtIHNxbCBTUUwgcXVlcnkgdG8gZXhlY3V0ZVxuICogQHBhcmFtIHBhcmFtcyBRdWVyeSBwYXJhbWV0ZXJzXG4gKiBAcmV0dXJucyBPYmplY3Qgd2l0aCByb3dDb3VudCBwcm9wZXJ0eSBpbmRpY2F0aW5nIGFmZmVjdGVkIHJvd3NcbiAqL1xuYXN5bmMgZnVuY3Rpb24gZXhlY1dpdGhPcmFjbGVDb25uZWN0aW9uKFxuICBvcmdJZDogbnVtYmVyLFxuICBjb25uZWN0aW9uSW5mbzogYW55LFxuICBzcWw6IHN0cmluZyxcbiAgcGFyYW1zOiBhbnlbXSA9IFtdXG4pOiBQcm9taXNlPHtyb3dDb3VudDogbnVtYmVyfT4ge1xuICAvLyBWYWxpZGF0ZSBPcmFjbGUgY29ubmVjdGlvbiBpbmZvXG4gIGlmICghY29ubmVjdGlvbkluZm8gfHwgIWNvbm5lY3Rpb25JbmZvLnVzZXIgfHwgIWNvbm5lY3Rpb25JbmZvLnBhc3N3b3JkIHx8ICFjb25uZWN0aW9uSW5mby5jb25uZWN0U3RyaW5nKSB7XG4gICAgY29uc29sZS5lcnJvcihgSW52YWxpZCBPcmFjbGUgY29ubmVjdGlvbiBpbmZvIGZvciBvcmcgJHtvcmdJZH06YCwgY29ubmVjdGlvbkluZm8pO1xuICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBPcmFjbGUgY29ubmVjdGlvbiBjb25maWd1cmF0aW9uIGZvciBvcmdhbml6YXRpb24gJHtvcmdJZH1gKTtcbiAgfVxuICBcbiAgY29uc3QgeyB1c2VyLCBwYXNzd29yZCwgY29ubmVjdFN0cmluZyB9ID0gY29ubmVjdGlvbkluZm87XG4gIFxuICB0cnkge1xuICAgIC8vIEZvcm1hdCB0aGUgY29ubmVjdFN0cmluZyBjb3JyZWN0bHkgaWYgaXQgZG9lc24ndCBoYXZlIHRoZSBwcm9wZXIgZm9ybWF0XG4gICAgbGV0IGZvcm1hdHRlZENvbm5lY3RTdHJpbmcgPSBjb25uZWN0U3RyaW5nO1xuICAgIGlmICghY29ubmVjdFN0cmluZy5pbmNsdWRlcygnLycpICYmIGNvbm5lY3RTdHJpbmcuaW5jbHVkZXMoJzonKSkge1xuICAgICAgLy8gQ29udmVydCBmcm9tIGhvc3Q6cG9ydC9zZXJ2aWNlIGZvcm1hdCB0byBwcm9wZXIgT3JhY2xlIGNvbm5lY3Rpb24gc3RyaW5nXG4gICAgICBjb25zdCBbaG9zdFBvcnQsIHNlcnZpY2VdID0gY29ubmVjdFN0cmluZy5zcGxpdCgnLycpO1xuICAgICAgY29uc3QgW2hvc3QsIHBvcnRdID0gaG9zdFBvcnQuc3BsaXQoJzonKTtcbiAgICAgIGZvcm1hdHRlZENvbm5lY3RTdHJpbmcgPSBgKERFU0NSSVBUSU9OPShBRERSRVNTPShQUk9UT0NPTD1UQ1ApKEhPU1Q9JHtob3N0fSkoUE9SVD0ke3BvcnR9KSkoQ09OTkVDVF9EQVRBPShTRVJWSUNFX05BTUU9JHtzZXJ2aWNlfSkpKWA7XG4gICAgICBjb25zb2xlLmxvZyhgUmVmb3JtYXR0ZWQgT3JhY2xlIGNvbm5lY3Qgc3RyaW5nIHRvOiAke2Zvcm1hdHRlZENvbm5lY3RTdHJpbmd9YCk7XG4gICAgfVxuICAgIFxuICAgIC8vIER5bmFtaWNhbGx5IGltcG9ydCBvcmFjbGVkYiBvbmx5IHdoZW4gbmVlZGVkXG4gICAgY29uc3Qgb3JhY2xlZGIgPSBhd2FpdCBpbXBvcnQoJ29yYWNsZWRiJyk7XG4gICAgXG4gICAgLy8gQ29uZmlndXJlIE9yYWNsZSBkcml2ZXJcbiAgICBvcmFjbGVkYi5kZWZhdWx0Lm91dEZvcm1hdCA9IG9yYWNsZWRiLmRlZmF1bHQuT1VUX0ZPUk1BVF9PQkpFQ1Q7XG4gICAgXG4gICAgLy8gQ3JlYXRlIGNvbm5lY3Rpb24gdG8gT3JhY2xlIGRhdGFiYXNlXG4gICAgY29uc29sZS5sb2coYENvbm5lY3RpbmcgdG8gT3JhY2xlIGRhdGFiYXNlIGZvciBvcmcgJHtvcmdJZH0gd2l0aCB1c2VyICR7dXNlcn1gKTtcbiAgICBjb25zdCBjb25uZWN0aW9uID0gYXdhaXQgb3JhY2xlZGIuZGVmYXVsdC5nZXRDb25uZWN0aW9uKHtcbiAgICAgIHVzZXIsXG4gICAgICBwYXNzd29yZCxcbiAgICAgIGNvbm5lY3Rpb25TdHJpbmc6IGZvcm1hdHRlZENvbm5lY3RTdHJpbmcsXG4gICAgfSk7XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIC8vIEV4ZWN1dGUgdGhlIHF1ZXJ5XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb25uZWN0aW9uLmV4ZWN1dGUoc3FsLCBwYXJhbXMsIHsgYXV0b0NvbW1pdDogdHJ1ZSB9KTtcbiAgICAgIFxuICAgICAgLy8gUmV0dXJuIHRoZSByb3dDb3VudCAoT3JhY2xlIGNhbGxzIHRoaXMgcm93c0FmZmVjdGVkKVxuICAgICAgcmV0dXJuIHsgcm93Q291bnQ6IHJlc3VsdC5yb3dzQWZmZWN0ZWQgfHwgMCB9O1xuICAgIH0gY2F0Y2ggKGVycjogYW55KSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBPcmFjbGUgcXVlcnkgZXJyb3IgZm9yIG9yZyAke29yZ0lkfTpgLCBlcnIubWVzc2FnZSk7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIC8vIENsb3NlIHRoZSBjb25uZWN0aW9uXG4gICAgICBhd2FpdCBjb25uZWN0aW9uLmNsb3NlKCk7XG4gICAgfVxuICB9IGNhdGNoIChlcnI6IGFueSkge1xuICAgIGNvbnNvbGUuZXJyb3IoYE9yYWNsZSBjb25uZWN0aW9uIGVycm9yIGZvciBvcmcgJHtvcmdJZH06YCwgZXJyLm1lc3NhZ2UpO1xuICAgIHRocm93IGVycjtcbiAgfVxufVxuXG4vKipcbiAqIEdldCBjb25uZWN0aW9uIGRldGFpbHMgZm9yIGFuIG9yZ2FuaXphdGlvblxuICogQHBhcmFtIG9yZ0lkIE9yZ2FuaXphdGlvbiBJRFxuICogQHJldHVybnMgQ29ubmVjdGlvbiBkZXRhaWxzIG9yIG51bGwgaWYgbm90IGZvdW5kXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRPcmdDb25uZWN0aW9uRGV0YWlscyhvcmdJZDogbnVtYmVyKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnkoXG4gICAgICBgU0VMRUNUIFwiREFUQUJBU0VfSU5GT1wiIEZST00gXCJOTDJTUUxfT1JHXCIgV0hFUkUgXCJPUkdfSURcIiA9ICQxYCxcbiAgICAgIFtvcmdJZF1cbiAgICApO1xuICAgIFxuICAgIGlmIChyZXN1bHQgJiYgcmVzdWx0Lmxlbmd0aCA+IDAgJiYgcmVzdWx0WzBdLkRBVEFCQVNFX0lORk8pIHtcbiAgICAgIHJldHVybiBKU09OLnBhcnNlKHJlc3VsdFswXS5EQVRBQkFTRV9JTkZPKTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGdldHRpbmcgb3JnYW5pemF0aW9uIGNvbm5lY3Rpb24gZGV0YWlsczpcIiwgZXJyb3IpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbi8qKlxuICogQWRhcHQgU1FMIHF1ZXJ5IGZvciBPcmFjbGUgZGF0YWJhc2VcbiAqIEBwYXJhbSBzcWwgU1FMIHF1ZXJ5IHRvIGFkYXB0XG4gKiBAcGFyYW0gc2NoZW1hTmFtZSBTY2hlbWEgbmFtZSB0byBwcmVmaXggdGFibGVzIHdpdGhcbiAqIEByZXR1cm5zIEFkYXB0ZWQgU1FMIHF1ZXJ5XG4gKi9cbmZ1bmN0aW9uIGFkYXB0U3FsRm9yT3JhY2xlKHNxbDogc3RyaW5nLCB1c2VyOiBhbnkpOiBzdHJpbmcge1xuICAvLyBTaSBubyBoYXkgU1FMLCBkZXZvbHZlciBjYWRlbmEgdmFjw61hXG4gIGlmICghc3FsKSByZXR1cm4gJyc7XG4gIFxuICAvLyBDb252ZXJ0aXIgU1FMIGEgbWF5w7pzY3VsYXMgcGFyYSBmYWNpbGl0YXIgbGEgY29pbmNpZGVuY2lhIGRlIHBhdHJvbmVzXG4gIGxldCB1cHBlclNxbCA9IHNxbC50b1VwcGVyQ2FzZSgpO1xuICBsZXQgbW9kaWZpZWRTcWwgPSBzcWw7XG4gIFxuICAvLyBWZXJpZmljYXIgc2kgZXMgdW5hIGNvbnN1bHRhIGRlIGVzdGlsbyBQb3N0Z3JlU1FMXG4gIGNvbnN0IGlzUGdTdHlsZSA9IHVwcGVyU3FsLmluY2x1ZGVzKCdcIicpIHx8IHVwcGVyU3FsLmluY2x1ZGVzKCckMScpIHx8IHVwcGVyU3FsLmluY2x1ZGVzKCdMSU1JVCcpO1xuICBcbiAgLy8gVmVyaWZpY2FyIHNpIGxhIGNvbnN1bHRhIGVzIHBhcmEgdGFibGFzIGRlbCBzaXN0ZW1hXG4gIGNvbnN0IGlzU3lzdGVtVGFibGVRdWVyeSA9IChcbiAgICB1cHBlclNxbC5pbmNsdWRlcygnQUxMX1RBQkxFUycpIHx8IFxuICAgIHVwcGVyU3FsLmluY2x1ZGVzKCdVU0VSX1RBQkxFUycpIHx8IFxuICAgIHVwcGVyU3FsLmluY2x1ZGVzKCdEVUFMJylcbiAgKTtcbiAgXG4gIGlmIChpc1BnU3R5bGUpIHtcbiAgICBjb25zb2xlLmxvZygnQ29udmVydGluZyBQb3N0Z3JlU1FMLXN0eWxlIHF1ZXJ5IHRvIE9yYWNsZSBzeW50YXgnKTtcbiAgICBcbiAgICAvLyBSZWVtcGxhemFyIGNvbWlsbGFzIGRvYmxlcyBjb24gbmFkYSAoT3JhY2xlIG5vIG5lY2VzaXRhIGNvbWlsbGFzIHBhcmEgaWRlbnRpZmljYWRvcmVzIHJlZ3VsYXJlcylcbiAgICBpZiAoIWlzU3lzdGVtVGFibGVRdWVyeSkge1xuICAgICAgbW9kaWZpZWRTcWwgPSBtb2RpZmllZFNxbC5yZXBsYWNlKC9cIi9nLCAnJyk7XG4gICAgfVxuICAgIFxuICAgIC8vIFJlZW1wbGF6YXIgJDEsICQyLCBldGMuIGNvbiA6MSwgOjIsIGV0Yy5cbiAgICBtb2RpZmllZFNxbCA9IG1vZGlmaWVkU3FsLnJlcGxhY2UoL1xcJChbMC05XSspL2csICc6JDEnKTtcbiAgICBcbiAgICAvLyBSZWVtcGxhemFyIExJTUlUIGNvbiBGRVRDSCBGSVJTVC9ORVhUXG4gICAgaWYgKHVwcGVyU3FsLmluY2x1ZGVzKCdMSU1JVCcpKSB7XG4gICAgICBjb25zdCBsaW1pdE1hdGNoID0gbW9kaWZpZWRTcWwubWF0Y2goL0xJTUlUXFxzKyhcXGQrKS9pKTtcbiAgICAgIGlmIChsaW1pdE1hdGNoKSB7XG4gICAgICAgIGNvbnN0IGxpbWl0VmFsdWUgPSBsaW1pdE1hdGNoWzFdO1xuICAgICAgICBtb2RpZmllZFNxbCA9IG1vZGlmaWVkU3FsLnJlcGxhY2UoL0xJTUlUXFxzK1xcZCsvaSwgYEZFVENIIEZJUlNUICR7bGltaXRWYWx1ZX0gUk9XUyBPTkxZYCk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIFxuICAvLyBTaSBlcyB1bmEgY29uc3VsdGEgcGFyYSB0YWJsYXMgZGVsIHNpc3RlbWEsIE5PIGFncmVnYXIgcHJlZmlqbyBkZSBlc3F1ZW1hXG4gIGlmIChpc1N5c3RlbVRhYmxlUXVlcnkgJiYgdXNlciAmJiB1c2VyLnVzZXJuYW1lKSB7XG4gICAgLy8gUGFyYSB0YWJsYXMgZGVsIHNpc3RlbWEsIGVsaW1pbmFyIGN1YWxxdWllciBwcmVmaWpvIGRlIGVzcXVlbWEgcXVlIHNlIGhheWEgYWdyZWdhZG9cbiAgICBjb25zdCBzY2hlbWFQcmVmaXggPSBuZXcgUmVnRXhwKGAke3VzZXIudXNlcm5hbWV9XFwuYCwgJ2dpJyk7XG4gICAgbW9kaWZpZWRTcWwgPSBtb2RpZmllZFNxbC5yZXBsYWNlKHNjaGVtYVByZWZpeCwgJycpO1xuICAgIHJldHVybiBtb2RpZmllZFNxbDtcbiAgfVxuICBcbiAgLy8gQWdyZWdhciBwcmVmaWpvIGRlIGVzcXVlbWEgcGFyYSB0YWJsYXMgZGUgT3JhY2xlIHNpIGHDum4gbm8gdGllbmVuIHVub1xuICBpZiAodXNlciAmJiB1c2VyLnVzZXJuYW1lKSB7XG4gICAgLy8gQnVzY2FyIG5vbWJyZXMgZGUgdGFibGFzIGVuIGNsw6F1c3VsYXMgRlJPTSB5IEpPSU5cbiAgICBtb2RpZmllZFNxbCA9IG1vZGlmaWVkU3FsLnJlcGxhY2UoXG4gICAgICAvKD86RlJPTXxKT0lOKVxccysoW1wiJ10/KShcXHcrKShbXCInXT8pL2dpLFxuICAgICAgKG1hdGNoLCBxdW90ZTEsIHRhYmxlTmFtZSwgcXVvdGUyKSA9PiB7XG4gICAgICAgIC8vIFNpIGVsIG5vbWJyZSBkZSBsYSB0YWJsYSB5YSB0aWVuZSB1biBwcmVmaWpvIGRlIGVzcXVlbWEsIGRlamFybG8gc29sb1xuICAgICAgICBpZiAodGFibGVOYW1lLmluY2x1ZGVzKCcuJykpIHtcbiAgICAgICAgICByZXR1cm4gbWF0Y2g7XG4gICAgICAgIH1cbiAgICAgICAgLy8gT21pdGlyIHRhYmxhcyBkZWwgc2lzdGVtYVxuICAgICAgICBpZiAoWydBTExfVEFCTEVTJywgJ1VTRVJfVEFCTEVTJywgJ0RVQUwnXS5pbmNsdWRlcyh0YWJsZU5hbWUudG9VcHBlckNhc2UoKSkpIHtcbiAgICAgICAgICByZXR1cm4gbWF0Y2g7XG4gICAgICAgIH1cbiAgICAgICAgLy8gRGUgbG8gY29udHJhcmlvLCBhZ3JlZ2FyIGVsIHByZWZpam8gZGUgZXNxdWVtYSBjb24gZWwgbm9tYnJlIGRlIHVzdWFyaW8gYWN0dWFsXG4gICAgICAgIHJldHVybiBtYXRjaC5yZXBsYWNlKFxuICAgICAgICAgIGAke3F1b3RlMX0ke3RhYmxlTmFtZX0ke3F1b3RlMn1gLFxuICAgICAgICAgIGAke3F1b3RlMX0ke3VzZXIudXNlcm5hbWV9LiR7dGFibGVOYW1lfSR7cXVvdGUyfWBcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICApO1xuICB9XG4gIFxuICByZXR1cm4gbW9kaWZpZWRTcWw7XG59XG5cbi8vIEFkZCBhIGNsZWFudXAgZnVuY3Rpb24gZm9yIG9yZyBwb29sc1xuYXN5bmMgZnVuY3Rpb24gY2xlYW51cE9yZ1Bvb2xzKCkge1xuICBjb25zdCBvcmdJZHMgPSBBcnJheS5mcm9tKG9yZ1Bvb2xzLmtleXMoKSk7XG4gIGZvciAoY29uc3Qgb3JnSWQgb2Ygb3JnSWRzKSB7XG4gICAgY29uc3QgcG9vbCA9IG9yZ1Bvb2xzLmdldChvcmdJZCk7XG4gICAgaWYgKHBvb2wpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IHBvb2wuZW5kKCk7XG4gICAgICAgIG9yZ1Bvb2xzLmRlbGV0ZShvcmdJZCk7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgY2xlYW5pbmcgdXAgcG9vbCBmb3Igb3JnICR7b3JnSWR9OmAsIGVycik7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi8vIEFkZCBwcm9jZXNzIGNsZWFudXAgaGFuZGxlcnNcbnByb2Nlc3Mub24oJ1NJR1RFUk0nLCBjbGVhbnVwT3JnUG9vbHMpO1xucHJvY2Vzcy5vbignU0lHSU5UJywgY2xlYW51cE9yZ1Bvb2xzKTsiXSwibmFtZXMiOlsiUG9vbCIsInBvb2wiLCJvcmdQb29scyIsIk1hcCIsImluaXRQb29sIiwiY29uc29sZSIsImxvZyIsInByb2Nlc3MiLCJlbnYiLCJEQVRBQkFTRV9VUkwiLCJjb25uZWN0aW9uU3RyaW5nIiwic3NsIiwicmVqZWN0VW5hdXRob3JpemVkIiwibWF4IiwibWluIiwiaWRsZVRpbWVvdXRNaWxsaXMiLCJjb25uZWN0aW9uVGltZW91dE1pbGxpcyIsIm9uIiwiZXJyIiwiZXJyb3IiLCJxdWVyeSIsInNxbCIsInBhcmFtcyIsImNsaWVudCIsImNvbm5lY3QiLCJyZXN1bHQiLCJyb3dzIiwicmVsZWFzZSIsImV4ZWMiLCJyb3dDb3VudCIsImNyZWF0ZU9yZ1Bvb2wiLCJvcmdJZCIsImNvbm5lY3Rpb25JbmZvIiwib3JnUG9vbCIsImdldCIsInVzZXIiLCJwYXNzd29yZCIsImhvc3QiLCJwb3J0IiwiZGF0YWJhc2UiLCJkZWxldGUiLCJzZXQiLCJxdWVyeVdpdGhPcmdDb25uZWN0aW9uIiwiaXNPcmFjbGUiLCJjb25uZWN0U3RyaW5nIiwiaXNQb3N0Z3JlcyIsImlzTXlTcWwiLCJpc01zU3FsIiwic2VydmVyIiwicXVlcnlXaXRoT3JhY2xlQ29ubmVjdGlvbiIsIkVycm9yIiwibWVzc2FnZSIsImluY2x1ZGVzIiwiY2xlYW51cE9yZ1Bvb2xzIiwiZm9ybWF0dGVkQ29ubmVjdFN0cmluZyIsImhvc3RQb3J0Iiwic2VydmljZSIsInNwbGl0Iiwib3JhY2xlZGIiLCJkZWZhdWx0Iiwib3V0Rm9ybWF0IiwiT1VUX0ZPUk1BVF9PQkpFQ1QiLCJjb25uZWN0aW9uIiwiZ2V0Q29ubmVjdGlvbiIsIm1vZGlmaWVkU3FsIiwiYWRhcHRTcWxGb3JPcmFjbGUiLCJtb2RpZmllZFBhcmFtcyIsImV4ZWN1dGUiLCJjbG9zZSIsImV4ZWNXaXRoT3JnQ29ubmVjdGlvbiIsImV4ZWNXaXRoT3JhY2xlQ29ubmVjdGlvbiIsImVuZCIsImF1dG9Db21taXQiLCJyb3dzQWZmZWN0ZWQiLCJnZXRPcmdDb25uZWN0aW9uRGV0YWlscyIsImxlbmd0aCIsIkRBVEFCQVNFX0lORk8iLCJKU09OIiwicGFyc2UiLCJ1cHBlclNxbCIsInRvVXBwZXJDYXNlIiwiaXNQZ1N0eWxlIiwiaXNTeXN0ZW1UYWJsZVF1ZXJ5IiwicmVwbGFjZSIsImxpbWl0TWF0Y2giLCJtYXRjaCIsImxpbWl0VmFsdWUiLCJ1c2VybmFtZSIsInNjaGVtYVByZWZpeCIsIlJlZ0V4cCIsInF1b3RlMSIsInRhYmxlTmFtZSIsInF1b3RlMiIsIm9yZ0lkcyIsIkFycmF5IiwiZnJvbSIsImtleXMiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/db.ts\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fplans%2Froute&page=%2Fapi%2Fplans%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fplans%2Froute.ts&appDir=%2Fhome%2Fproject%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fproject&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fplans%2Froute&page=%2Fapi%2Fplans%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fplans%2Froute.ts&appDir=%2Fhome%2Fproject%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fproject&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _home_project_app_api_plans_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/plans/route.ts */ \"(rsc)/./app/api/plans/route.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_home_project_app_api_plans_route_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_home_project_app_api_plans_route_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/plans/route\",\n        pathname: \"/api/plans\",\n        filename: \"route\",\n        bundlePath: \"app/api/plans/route\"\n    },\n    resolvedPagePath: \"/home/project/app/api/plans/route.ts\",\n    nextConfigOutput,\n    userland: _home_project_app_api_plans_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZwbGFucyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGcGxhbnMlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZwbGFucyUyRnJvdXRlLnRzJmFwcERpcj0lMkZob21lJTJGcHJvamVjdCUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGaG9tZSUyRnByb2plY3QmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQStGO0FBQ3ZDO0FBQ3FCO0FBQ1o7QUFDakU7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHlHQUFtQjtBQUMzQztBQUNBLGNBQWMsa0VBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxzREFBc0Q7QUFDOUQ7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDMEY7O0FBRTFGLHFDIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9ob21lL3Byb2plY3QvYXBwL2FwaS9wbGFucy9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvcGxhbnMvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9wbGFuc1wiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvcGxhbnMvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvaG9tZS9wcm9qZWN0L2FwcC9hcGkvcGxhbnMvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyB3b3JrQXN5bmNTdG9yYWdlLCB3b3JrVW5pdEFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICB3b3JrQXN5bmNTdG9yYWdlLFxuICAgICAgICB3b3JrVW5pdEFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fplans%2Froute&page=%2Fapi%2Fplans%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fplans%2Froute.ts&appDir=%2Fhome%2Fproject%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fproject&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "oracledb":
/*!***************************!*\
  !*** external "oracledb" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("oracledb");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "pg":
/*!*********************!*\
  !*** external "pg" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = import("pg");;

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@opentelemetry","vendor-chunks/dotenv"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fplans%2Froute&page=%2Fapi%2Fplans%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fplans%2Froute.ts&appDir=%2Fhome%2Fproject%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fproject&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();